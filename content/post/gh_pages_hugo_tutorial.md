---
title: "Tutorial: Hugo Powered Blog Hosted on GitHub Pages"
description: "Step by step tutorial for using Hugo to generate a blog that will be hosted on github pages."
date: "2014-03-29"
draft: true
tags:
    - "web" 
    - "tutorial"
    - "hugo"
    - "github-pages"
---

## Intro

Many Hugo users have expressed interest in seeing a tutorial for how to set up a blog that generated by Hugo and hosted on GitHub pages. This tutorial will do just that. We only require that the reader has Hugo installed correctly and is comfortable with git and GitHub.

During this tutorial, I will walk you through the main steps I took to create an example blog available at [http://spencerlyon2.github.io/hugo_gh_blog](http://spencerlyon2.github.io/hugo_gh_blog). The source code for this blog is on [GitHub](http://spencerlyon2.github.io/hugo_gh_blog). Readers are encouraged to follow along either by working through each step of this tutorial and creating the mentioned files, or downloading the example repository and following along.

## Preliminaries: Getting Set Up

Before diving in to actually creating the website, there are a few preliminary things to get taken care of. First, at this point I assume that Hugo and git are both properly installed and setup on your computer. If they are not, see the [Installing Hugo](/overview/installing) section of the Hugo documentation.

### Find a Home for Your Files

As our goal is to host a website using GitHub pages, it is natural for us to host the content of the page in a GitHub repository. Thus, the first step is to either create a new repository on GitHub or create a new directory within an existing repository where the content of the website will live. To do this I created the repository [spencerlyon2/hugo_gh_blog](http://spencerlyon2.github.io/hugo_gh_blog).

## Create the Blog

### Write a `config.yaml` File

The very first step in creating a new Hugo site is to [write the config file](/overview/configuration). This config file is important for at least two reasons: (1) this is where site-wide settings (like the websites `baseurl`) go and (2) the config file dictates to some extent how Hugo will generate the website. For the example website I created a file `config.yaml` with the following contents


```
contentdir: "content"
layoutdir: "layouts"
publishdir: "public"
indexes:
  category: "categories"
baseurl: "http://spencerlyon2.github.io/hugo_gh_blog"
title: "Hugo Blog Template for GitHub Pages"
```


### Define Structure of Website

Hugo assumes that you organize the content of your site in a meaningful way and uses the same structure to render the website. Notice that we have the line `contentdir: "content"` in our configuration file. This means that all the actual content of the website should be placed somewhere within a folder named `content`. Hugo treats all directories in `content` as sections. For our example we only need one section: a place to hold our blog posts. So we created two new folders:

<!-- TODO: Maybe use `tree` to generate this -->

```
▾ <root>/
    ▾ content/
        ▾ posts/
```

### Create html Templates

The next step is to define the look and feel of your new website. Because Hugo will generate the site using html templates written by the user (you), this step is very subjective. I will merely present one possible theme that could be used to generate a blog. I decided to base the example project on a Jekyll theme called [lanyon](http://lanyon.getpoole.com). The lanyon theme is pure css and a slightly modified version of the css is in the `/static/css` directory of the example repository. If you are following along, you should grab the `static` folder from the example repository and put it alongside the `content` folder you just created.


## Configure `git` Workflow



<!-- FIX
FROM
HERE
TO
THE
END -->

## Setting repo up

I will be showing you how to set up a blog using Hugo to generate the website and GitHub pages to serve it. We will be using what GitHub calls a project site (TODO: add link to project-page description in GHP docs).

There are some preliminary steps to getting this working.

1. Create repo and a directory for the hugo content. If the repo will only be used to manage content for a personal website, the directory for hugo content can be the root directory. For now lets take this approach and call the repository `hugo_gh_blog`. The GitHub ssh url for this repository (yes this repo exists) is `git@github.com:spencerlyon2/hugo_gh_blog.git`. We'll use this later on.
2. Create `config.yaml`. Specify `publishdir`. We will use it later on. For now assume it is called public. Also set baseurl to the correct thing. In our example this is done with the following line: `baseurl: "http://spencerlyon2.github.io/hugo_gh_blog"`
3. Define Hugo "Sections" for the content
4. Create html templates for the site. See my blog post on using LiveReload + hugo server -w + sublime text for easy updating of templates.
5. Create some content
6. Get git configured properly. This is a critical step. We will use the `git subtree` family of commands. Steps to doing this:
  * Create new, orphaned branch called `gh-pages`. Use this command `git checkout --orphan gh-pages`
  * Unstage everything: `git rm --cached $(git ls-files)`
  * Grab the readme (or any file -- we just need something for git to commit for us) from the master branch: `git checkout master README.md`
  * Add everything: `git add .`
  * commit it: `git commit -m "INIT: initial commit on gh-pages branch"`
  * Push to gh-pages branch: `git push origin gh-pages`
  * Checkout back to master: `git checkout master`
  * Add `gh-pages` branch as a subtree with the prefix set to `publishdir` from your `config.yaml`: `git subtree add --prefix public git@github.com:spencerlyon2/hugo_gh_blog.git gh-pages --squash`
  * Pull commits  from that subtree (shouldn't be necessary, but it is a good habit to avoid potential merge conflicts.): `git subtree pull --prefix=public`
7. Run hugo: `hugo`
8. Add everything in sight: `git add -A`
9. Commit and push to master branch `git commit -m "Updating site" && git push origin master`
10. Push the subtree back to the root of the gh-pages branch: `git subtree push --prefix=public git@github.com:spencerlyon2/hugo_gh_blog.git gh-pages`

The last few steps are repetitive and tedious. I use the following shell script called `deploy.sh` to automate it for me:

```
#!/bin/bash

echo -e "\033[0;32mDeploying updates to Github...\033[0m"

# Build the project.
hugo

# Add changes to git.
git add -A

# Commit changes.
msg="rebuilding site `date`"
if [ $# -eq 1 ]
  then msg="$1"
fi
git commit -m "$msg"

# Push source and build repos.
git push origin master
git subtree push --prefix=public git@github.com:spencerlyon2/hugo_gh_blog.git gh-pages
```

After you create this file in the root directory of your repository, you need to make it executable: `chmod +x deploy.sh`.

Now my workflow is as follows: after I make a change to my site, I can have hugo build it, add all files, commit, push to master, and update the website with one command (from root directory of repo): `./deploy.sh`. This script accepts an optional argument for the git commit message that will be used. If I wanted to specify a commit message I would simply call `./deploy.sh "My commit message"`. If I don't specify anything, the script creates one for me.
